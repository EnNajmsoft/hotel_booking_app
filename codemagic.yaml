workflows:
  build:
    name: Android build with automatic maintenance
    environment:
      flutter: stable
      android:
        api_level: 34
        build_tools_version: "34.0.0"
    scripts:
      - name: Clean project
        script: flutter clean
      - name: Upgrade dependencies automatically
        script: flutter pub upgrade --major-versions
      - name: Get dependencies
        script: flutter pub get
      - name: Build Android app bundle
        script: flutter build appbundle --debug
    artifacts:
      - build/app/outputs/bundle/release/app.aab
    notifications:
      slack:
        webhook_url: $SLACK_WEBHOOK_URL
        message: "Build status: $BUILD_STATUS"
